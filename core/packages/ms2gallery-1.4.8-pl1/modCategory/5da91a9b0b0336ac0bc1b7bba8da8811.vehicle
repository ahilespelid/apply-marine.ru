<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      'd5c5f4c479aabbd78a2803761fb783d8' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ms2Gallery.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"span2 col-md-2\\">\\n\\t<a href=\\"[[+360x270:default=`[[+url]]`]]\\" class=\\"thumbnail\\" data-image=\\"[[+url]]\\">\\n\\t\\t<img src=\\"[[+120x90]]\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" width=\\"120\\" height=\\"90\\">\\n\\t<\\/a>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/chunks\\/chunk.ms2gallery_row.tpl","content":"<div class=\\"span2 col-md-2\\">\\n\\t<a href=\\"[[+360x270:default=`[[+url]]`]]\\" class=\\"thumbnail\\" data-image=\\"[[+url]]\\">\\n\\t\\t<img src=\\"[[+120x90]]\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" width=\\"120\\" height=\\"90\\">\\n\\t<\\/a>\\n<\\/div>"}',
        'guid' => '205c0504b639aab568a94c0c7324bd06',
        'native_key' => 0,
        'signature' => '4619e7ea45e1f734488f3954f493cf8a',
      ),
      '59f39cc2bd5e2633b4e27f522732c9b7' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ms2Gallery.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ms2Gallery\\">\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/ms2gallery\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/ms2gallery\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" class=\\"mainImage\\" \\/>\\n\\t<\\/a>\\n\\t<div class=\\"row\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/chunks\\/chunk.ms2gallery_outer.tpl","content":"<div class=\\"ms2Gallery\\">\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/ms2gallery\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/ms2gallery\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" class=\\"mainImage\\" \\/>\\n\\t<\\/a>\\n\\t<div class=\\"row\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/div>"}',
        'guid' => 'd6a2c47dc90fa1010bedde4d686305ab',
        'native_key' => 0,
        'signature' => '66d6d90e4f070a59009023d654e4923b',
      ),
      '7fe5e8baaa86346ccb8d7e48056bbe92' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ms2Gallery.empty","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ms2Gallery\\">\\n\\t<img src=\\"[[++assets_url]]components\\/ms2gallery\\/img\\/web\\/ms2_medium.png\\" width=\\"360\\" height=\\"270\\" alt=\\"no photo\\" title=\\"\\" \\/>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/chunks\\/chunk.ms2gallery_empty.tpl","content":"<div class=\\"ms2Gallery\\">\\n\\t<img src=\\"[[++assets_url]]components\\/ms2gallery\\/img\\/web\\/ms2_medium.png\\" width=\\"360\\" height=\\"270\\" alt=\\"no photo\\" title=\\"\\" \\/>\\n<\\/div>"}',
        'guid' => '84ac27a13d65f5c5d872c5c848219368',
        'native_key' => 0,
        'signature' => '565b42e3b9b9d6bdebb2d58103071db7',
      ),
      'd539e1654cdaeb4c3fd9973927c3d5f3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ms2Gallery.single","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ms2Gallery\\">\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/ms2gallery\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/ms2gallery\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" class=\\"mainImage\\" \\/>\\n\\t<\\/a>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/chunks\\/chunk.ms2gallery_single.tpl","content":"<div class=\\"ms2Gallery\\">\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/ms2gallery\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/ms2gallery\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"[[+alt]]\\" title=\\"[[+name]]\\" class=\\"mainImage\\" \\/>\\n\\t<\\/a>\\n<\\/div>"}',
        'guid' => '5a9bca795ce5cc30602c79153d41d68a',
        'native_key' => 0,
        'signature' => '93409baf0c10f0f335e64fee981c6053',
      ),
    ),
    'Snippets' => 
    array (
      '8e6e8b9ce81fc155b678bdc948ad609e' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ms2Gallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var ms2Gallery $ms2Gallery *\\/\\n$ms2Gallery = $modx->getService(\'ms2gallery\', \'ms2Gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/ms2gallery\\/\');\\n\\/* @var pdoFetch $pdoFetch *\\/\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {\\n\\treturn false;\\n}\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/ms2gallery\\/img\\/mgr\\/extensions\\/\', true);\\n\\n\\/\\/ Register styles and scripts on frontend\\n$config = $ms2Gallery->makePlaceholders($ms2Gallery->config);\\n$css = $modx->getOption(\'frontend_css\', $scriptProperties, \'frontend_css\');\\nif (!empty($css) && preg_match(\'\\/\\\\.css\\/i\', $css)) {\\n\\t$modx->regClientCSS(str_replace($config[\'pl\'], $config[\'vl\'], $css));\\n}\\n$js = $modx->getOption(\'frontend_js\', $scriptProperties, \'frontend_js\');\\nif (!empty($js) && preg_match(\'\\/\\\\.js\\/i\', $js)) {\\n\\t$modx->regClientScript(str_replace($config[\'pl\'], $config[\'vl\'], $js));\\n}\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\nif (empty($tagsSeparator)) {\\n\\t$tagsSeparator = \',\';\\n}\\n\\n$where = array(\\n\\t\'File.parent\' => 0,\\n);\\n\\n\\/\\/ Define where parameters\\nif ($scriptProperties[\'parents\'] == \'\' && empty($scriptProperties[\'resources\'])) {\\n\\t$resources = !empty($resource)\\n\\t\\t? $resource\\n\\t\\t: $modx->resource->get(\'id\');\\n\\t$scriptProperties[\'resources\'] = $resources;\\n}\\n\\nif (!empty($filetype)) {\\n\\t$where[\'File.type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\n\\nif (empty($showInactive)) {\\n\\t$where[\'File.active\'] = 1;\\n}\\n\\n$innerJoin = array(\\n\\t\'File\' => array(\\n\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\'on\' => \'File.resource_id = modResource.id\',\\n\\t)\\n);\\nif (!empty($tagsVar) && isset($_REQUEST[$tagsVar])) {\\n\\t$tags = $modx->stripTags($_REQUEST[$tagsVar]);\\n}\\nif (!empty($tags)) {\\n\\t$tags = array_map(\'trim\', explode(\',\', str_replace(\'\\"\', \'\', $tags)));\\n\\t$tags = implode(\'\\",\\"\', $tags);\\n\\t$innerJoin[\'Tag\'] = array(\\n\\t\\t\'class\' => \'msResourceFileTag\',\\n\\t\\t\'on\' => \'Tag.file_id = File.id AND Tag.tag IN (\\"\' . $tags . \'\\")\',\\n\\t);\\n}\\n\\n$select = array(\\n\\t\'File\' => \'*\'\\n);\\n\\n\\/\\/ Set default sort by File table\\nif (!empty($sortby)) {\\n\\t$sortby = array_map(\'trim\', explode(\',\', $sortby));\\n\\tforeach ($sortby as &$value) {\\n\\t\\tif (strpos($value, \'.\') === false && strpos($value, \'(\') === false) {\\n\\t\\t\\t$value = \'File.\' . $value;\\n\\t\\t}\\n\\t}\\n\\t$scriptProperties[\'sortby\'] = implode(\', \', $sortby);\\n}\\n\\n\\/\\/ processing additional query params\\nforeach (array(\'where\', \'innerJoin\', \'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\nif (empty($limit) && !empty($offset)) {\\n\\t$scriptProperties[\'limit\'] = 10000;\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => \'modResource\',\\n\\t\'innerJoin\' => $innerJoin,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $select,\\n\\t\'limit\' => 10,\\n\\t\'sortby\' => \'rank\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'fastMode\' => false,\\n\\t\'groupby\' => \'File.id\',\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'ms2gallery_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$rows = $pdoFetch->run();\\n\\nif (!empty($rows)) {\\n\\t$tmp = current($rows);\\n\\t$resolution = array();\\n\\tif ($mediaSource = $modx->getObject(\'sources.modMediaSource\', $tmp[\'source\'])) {\\n\\t\\t$properties = $mediaSource->getProperties();\\n\\t\\tif (isset($properties[\'thumbnails\'][\'value\'])) {\\n\\t\\t\\t$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);\\n\\t\\t\\tforeach ($fileTypes as $v) {\\n\\t\\t\\t\\t$resolution[] = $v[\'w\'] . \'x\' . $v[\'h\'];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Processing rows\\n$output = null;\\n$images = array();\\nforeach ($rows as $k => $row) {\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t$row[\'tags\'] = \'\';\\n\\n\\tif (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n\\t\\t$q = $modx->newQuery(\'msResourceFile\', array(\'parent\' => $row[\'id\']));\\n\\t\\t$q->select(\'url\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\twhile ($tmp = $q->stmt->fetchColumn()) {\\n\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $tmp, $size)) {\\n\\t\\t\\t\\t\\t$row[$size[0]] = $tmp;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\telseif (!empty($row[\'type\'])) {\\n\\t\\t$row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n\\t\\t\\t? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n\\t\\t\\t: MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n\\t\\tforeach ($resolution as $v) {\\n\\t\\t\\t$row[$v] = $row[\'thumbnail\'];\\n\\t\\t}\\n\\t}\\n\\n\\tif (!empty($getTags)) {\\n\\t\\t$q = $modx->newQuery(\'msResourceFileTag\', array(\'file_id\' => $row[\'id\']));\\n\\t\\t$q->select(\'tag\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$row[\'tags\'] = implode($tagsSeparator, $q->stmt->fetchAll(PDO::FETCH_COLUMN));\\n\\t\\t}\\n\\t}\\n\\n\\t$images[] = $row;\\n}\\n$pdoFetch->addTime(!empty($getTags) ? \'Thumbnails and tags was retrieved\' : \'Thumbnails was retrieved\');\\n\\n\\/\\/ Processing chunks\\n$output = array();\\nforeach ($images as $row) {\\n\\t$tpl = $pdoFetch->defineChunk($row);\\n\\n\\t$output[] = empty($tpl)\\n\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n}\\n$pdoFetch->addTime(\'Rows was templated\');\\n\\n\\/\\/ Return output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"ms2GalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (count($output) === 1 && !empty($tplSingle)) {\\n\\t\\t$output = $pdoFetch->getChunk($tplSingle, array_shift($images));\\n\\t}\\n\\telse {\\n\\t\\t$output = implode($outputSeparator, $output);\\n\\n\\t\\tif (!empty($output)) {\\n\\t\\t\\t$arr = array_shift($images);\\n\\t\\t\\t$arr[\'rows\'] = $output;\\n\\t\\t\\tif (!empty($tplOuter)) {\\n\\t\\t\\t\\t$output = $pdoFetch->getChunk($tplOuter, $arr);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$output = !empty($tplEmpty)\\n\\t\\t\\t\\t? $pdoFetch->getChunk($tplEmpty)\\n\\t\\t\\t\\t: \'\';\\n\\t\\t}\\n\\t}\\n\\n\\t$output .= $log;\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:21:{s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:23:\\"ms2gallery_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:25:\\"ms2gallery_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:23:\\"ms2gallery_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:29:\\"ms2gallery_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:22:\\"ms2gallery_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.ms2Gallery.row\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:24:\\"ms2gallery_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.ms2Gallery.outer\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:24:\\"ms2gallery_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.ms2Gallery.empty\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tplSingle\\";a:7:{s:4:\\"name\\";s:9:\\"tplSingle\\";s:4:\\"desc\\";s:25:\\"ms2gallery_prop_tplSingle\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:21:\\"ms2gallery_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:22:\\"ms2gallery_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:21:\\"ms2gallery_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"filetype\\";a:7:{s:4:\\"name\\";s:8:\\"filetype\\";s:4:\\"desc\\";s:24:\\"ms2gallery_prop_filetype\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"showInactive\\";a:7:{s:4:\\"name\\";s:12:\\"showInactive\\";s:4:\\"desc\\";s:28:\\"ms2gallery_prop_showInactive\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:22:\\"ms2gallery_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"rank\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:23:\\"ms2gallery_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"frontend_css\\";a:7:{s:4:\\"name\\";s:12:\\"frontend_css\\";s:4:\\"desc\\";s:28:\\"ms2gallery_prop_frontend_css\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:26:\\"[[+cssUrl]]web\\/default.css\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"frontend_js\\";a:7:{s:4:\\"name\\";s:11:\\"frontend_js\\";s:4:\\"desc\\";s:27:\\"ms2gallery_prop_frontend_js\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"[[+jsUrl]]web\\/default.js\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"tags\\";a:7:{s:4:\\"name\\";s:4:\\"tags\\";s:4:\\"desc\\";s:20:\\"ms2gallery_prop_tags\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tagsVar\\";a:7:{s:4:\\"name\\";s:7:\\"tagsVar\\";s:4:\\"desc\\";s:23:\\"ms2gallery_prop_tagsVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"getTags\\";a:7:{s:4:\\"name\\";s:7:\\"getTags\\";s:4:\\"desc\\";s:23:\\"ms2gallery_prop_getTags\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tagsSeparator\\";a:7:{s:4:\\"name\\";s:13:\\"tagsSeparator\\";s:4:\\"desc\\";s:29:\\"ms2gallery_prop_tagsSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\",\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/snippets\\/snippet.ms2gallery.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var ms2Gallery $ms2Gallery *\\/\\n$ms2Gallery = $modx->getService(\'ms2gallery\', \'ms2Gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/ms2gallery\\/\');\\n\\/* @var pdoFetch $pdoFetch *\\/\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {\\n\\treturn false;\\n}\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\n\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/ms2gallery\\/img\\/mgr\\/extensions\\/\', true);\\n\\n\\/\\/ Register styles and scripts on frontend\\n$config = $ms2Gallery->makePlaceholders($ms2Gallery->config);\\n$css = $modx->getOption(\'frontend_css\', $scriptProperties, \'frontend_css\');\\nif (!empty($css) && preg_match(\'\\/\\\\.css\\/i\', $css)) {\\n\\t$modx->regClientCSS(str_replace($config[\'pl\'], $config[\'vl\'], $css));\\n}\\n$js = $modx->getOption(\'frontend_js\', $scriptProperties, \'frontend_js\');\\nif (!empty($js) && preg_match(\'\\/\\\\.js\\/i\', $js)) {\\n\\t$modx->regClientScript(str_replace($config[\'pl\'], $config[\'vl\'], $js));\\n}\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\nif (empty($tagsSeparator)) {\\n\\t$tagsSeparator = \',\';\\n}\\n\\n$where = array(\\n\\t\'File.parent\' => 0,\\n);\\n\\n\\/\\/ Define where parameters\\nif ($scriptProperties[\'parents\'] == \'\' && empty($scriptProperties[\'resources\'])) {\\n\\t$resources = !empty($resource)\\n\\t\\t? $resource\\n\\t\\t: $modx->resource->get(\'id\');\\n\\t$scriptProperties[\'resources\'] = $resources;\\n}\\n\\nif (!empty($filetype)) {\\n\\t$where[\'File.type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\n}\\n\\nif (empty($showInactive)) {\\n\\t$where[\'File.active\'] = 1;\\n}\\n\\n$innerJoin = array(\\n\\t\'File\' => array(\\n\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\'on\' => \'File.resource_id = modResource.id\',\\n\\t)\\n);\\nif (!empty($tagsVar) && isset($_REQUEST[$tagsVar])) {\\n\\t$tags = $modx->stripTags($_REQUEST[$tagsVar]);\\n}\\nif (!empty($tags)) {\\n\\t$tags = array_map(\'trim\', explode(\',\', str_replace(\'\\"\', \'\', $tags)));\\n\\t$tags = implode(\'\\",\\"\', $tags);\\n\\t$innerJoin[\'Tag\'] = array(\\n\\t\\t\'class\' => \'msResourceFileTag\',\\n\\t\\t\'on\' => \'Tag.file_id = File.id AND Tag.tag IN (\\"\' . $tags . \'\\")\',\\n\\t);\\n}\\n\\n$select = array(\\n\\t\'File\' => \'*\'\\n);\\n\\n\\/\\/ Set default sort by File table\\nif (!empty($sortby)) {\\n\\t$sortby = array_map(\'trim\', explode(\',\', $sortby));\\n\\tforeach ($sortby as &$value) {\\n\\t\\tif (strpos($value, \'.\') === false && strpos($value, \'(\') === false) {\\n\\t\\t\\t$value = \'File.\' . $value;\\n\\t\\t}\\n\\t}\\n\\t$scriptProperties[\'sortby\'] = implode(\', \', $sortby);\\n}\\n\\n\\/\\/ processing additional query params\\nforeach (array(\'where\', \'innerJoin\', \'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\nif (empty($limit) && !empty($offset)) {\\n\\t$scriptProperties[\'limit\'] = 10000;\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => \'modResource\',\\n\\t\'innerJoin\' => $innerJoin,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $select,\\n\\t\'limit\' => 10,\\n\\t\'sortby\' => \'rank\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'fastMode\' => false,\\n\\t\'groupby\' => \'File.id\',\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'ms2gallery_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$rows = $pdoFetch->run();\\n\\nif (!empty($rows)) {\\n\\t$tmp = current($rows);\\n\\t$resolution = array();\\n\\tif ($mediaSource = $modx->getObject(\'sources.modMediaSource\', $tmp[\'source\'])) {\\n\\t\\t$properties = $mediaSource->getProperties();\\n\\t\\tif (isset($properties[\'thumbnails\'][\'value\'])) {\\n\\t\\t\\t$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);\\n\\t\\t\\tforeach ($fileTypes as $v) {\\n\\t\\t\\t\\t$resolution[] = $v[\'w\'] . \'x\' . $v[\'h\'];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Processing rows\\n$output = null;\\n$images = array();\\nforeach ($rows as $k => $row) {\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t$row[\'tags\'] = \'\';\\n\\n\\tif (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\n\\t\\t$q = $modx->newQuery(\'msResourceFile\', array(\'parent\' => $row[\'id\']));\\n\\t\\t$q->select(\'url\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\twhile ($tmp = $q->stmt->fetchColumn()) {\\n\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $tmp, $size)) {\\n\\t\\t\\t\\t\\t$row[$size[0]] = $tmp;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\telseif (!empty($row[\'type\'])) {\\n\\t\\t$row[\'thumbnail\'] = file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\')\\n\\t\\t\\t? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'] . \'.png\'\\n\\t\\t\\t: MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\n\\t\\tforeach ($resolution as $v) {\\n\\t\\t\\t$row[$v] = $row[\'thumbnail\'];\\n\\t\\t}\\n\\t}\\n\\n\\tif (!empty($getTags)) {\\n\\t\\t$q = $modx->newQuery(\'msResourceFileTag\', array(\'file_id\' => $row[\'id\']));\\n\\t\\t$q->select(\'tag\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$row[\'tags\'] = implode($tagsSeparator, $q->stmt->fetchAll(PDO::FETCH_COLUMN));\\n\\t\\t}\\n\\t}\\n\\n\\t$images[] = $row;\\n}\\n$pdoFetch->addTime(!empty($getTags) ? \'Thumbnails and tags was retrieved\' : \'Thumbnails was retrieved\');\\n\\n\\/\\/ Processing chunks\\n$output = array();\\nforeach ($images as $row) {\\n\\t$tpl = $pdoFetch->defineChunk($row);\\n\\n\\t$output[] = empty($tpl)\\n\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n}\\n$pdoFetch->addTime(\'Rows was templated\');\\n\\n\\/\\/ Return output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"ms2GalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (count($output) === 1 && !empty($tplSingle)) {\\n\\t\\t$output = $pdoFetch->getChunk($tplSingle, array_shift($images));\\n\\t}\\n\\telse {\\n\\t\\t$output = implode($outputSeparator, $output);\\n\\n\\t\\tif (!empty($output)) {\\n\\t\\t\\t$arr = array_shift($images);\\n\\t\\t\\t$arr[\'rows\'] = $output;\\n\\t\\t\\tif (!empty($tplOuter)) {\\n\\t\\t\\t\\t$output = $pdoFetch->getChunk($tplOuter, $arr);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$output = !empty($tplEmpty)\\n\\t\\t\\t\\t? $pdoFetch->getChunk($tplEmpty)\\n\\t\\t\\t\\t: \'\';\\n\\t\\t}\\n\\t}\\n\\n\\t$output .= $log;\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => 'ed1e0a9395a72ab1eb8f709d73c199b0',
        'native_key' => 0,
        'signature' => '3626519ef6a8af10959db1e71859a5d8',
      ),
      'e023e4ad85229dec917127f5f5d47d74' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ms2GalleryResources","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n$class = \'modResource\';\\n\\n\\/\\/ Load model\\nif (empty($loadModels)) {\\n\\t$scriptProperties[\'loadModels\'] = \'ms2Gallery\';\\n} else {\\n\\t$loadModels = array_map(\'trim\', explode(\',\', $loadModels));\\n\\tif (!in_array(\'ms2gallery\', $loadModels)) {\\n\\t\\t$loadModels[] = \'ms2gallery\';\\n\\t}\\n\\t$scriptProperties[\'loadModels\'] = $loadModels;\\n}\\n\\n\\/\\/ Type of join\\nif (empty($typeOfJoin)) {\\n\\t$typeOfJoin = \'left\';\\n}\\nswitch (strtolower(trim($typeOfJoin))) {\\n\\tcase \'right\':\\n\\t\\t$join = \'rightJoin\';\\n\\t\\tbreak;\\n\\tcase \'inner\':\\n\\t\\t$join = \'innerJoin\';\\n\\t\\tbreak;\\n\\tdefault:\\n\\t\\t$join = \'leftJoin\';\\n\\t\\tbreak;\\n}\\n\\n\\/\\/ Select modResource\\n$columns = array_keys($modx->getFieldMeta($class));\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\n\\t$key = array_search(\'content\', $columns);\\n\\tunset($columns[$key]);\\n}\\n$select = array(\\n\\t$class => implode(\',\', $columns)\\n);\\n\\n\\/\\/ Include Thumbnails\\n${$join} = array();\\nif (empty($includeThumbs)) {\\n\\t$includeThumbs = \'120x90\';\\n}\\n$thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\nif (!empty($thumbs[0])) {\\n\\tforeach ($thumbs as $thumb) {\\n\\t\\t${$join}[] = array(\\n\\t\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\\t\'alias\' => $thumb,\\n\\t\\t\\t\'on\' => preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t\\t`$thumb`.`resource_id` = `$class`.`id` AND\\n\\t\\t\\t\\t`$thumb`.`parent` != 0 AND\\n\\t\\t\\t\\t`$thumb`.`path` LIKE \'%\\/$thumb\\/\' AND\\n\\t\\t\\t\\t`$thumb`.`active` = 1 AND\\n\\t\\t\\t\\t`$thumb`.`rank` = 0\\n\\t\\t\\t\\")\\n\\t\\t);\\n\\t\\t$select[$thumb] = preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t`$thumb`.`url` as `$thumb`,\\n\\t\\t\\t`$thumb`.`name` as `$thumb.name`,\\n\\t\\t\\t`$thumb`.`description` as `$thumb.description`,\\n\\t\\t\\t`$thumb`.`createdon` as `$thumb.createdon`,\\n\\t\\t\\t`$thumb`.`createdby` as `$thumb.createdby`,\\n\\t\\t\\t`$thumb`.`properties` as `$thumb.properties`,\\n\\t\\t\\t`$thumb`.`alt` as `$thumb.alt`,\\n\\t\\t\\t`$thumb`.`add` as `$thumb.add`\\n\\t\\t\\");\\n\\n\\t\\tif (!empty($includeOriginal)) {\\n\\t\\t\\t${$join}[] = array(\\n\\t\\t\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\\t\\t\'alias\' => $thumb.\'o\',\\n\\t\\t\\t\\t\'on\' => preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t\\t\\t`{$thumb}o`.`resource_id` = `$class`.`id` AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`parent` = 0 AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`active` = 1 AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`rank` = 0\\n\\t\\t\\t\\t\\")\\n\\t\\t\\t);\\n\\t\\t\\t$select[$thumb] .= \\", `{$thumb}o`.`url` as `$thumb.original`\\";\\n\\t\\t}\\n\\t}\\n}\\n\\nforeach (array(\'leftJoin\', \'innerJoin\', \'rightJoin\', \'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$scriptProperties[\'select\'] = $modx->toJSON($select);\\n$scriptProperties[\'groupby\'] = $class . \'.id\';\\n$scriptProperties[$join] = $modx->toJSON(${$join});\\n\\nreturn $modx->runSnippet(\'pdoResources\', $scriptProperties);","locked":0,"properties":"a:3:{s:10:\\"typeOfJoin\\";a:7:{s:4:\\"name\\";s:10:\\"typeOfJoin\\";s:4:\\"desc\\";s:26:\\"ms2gallery_prop_typeOfJoin\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:4:\\"left\\";s:5:\\"value\\";s:4:\\"left\\";}i:1;a:2:{s:4:\\"text\\";s:5:\\"inner\\";s:5:\\"value\\";s:5:\\"inner\\";}}s:5:\\"value\\";s:4:\\"left\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:29:\\"ms2gallery_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"120x90\\";s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"includeOriginal\\";a:7:{s:4:\\"name\\";s:15:\\"includeOriginal\\";s:4:\\"desc\\";s:31:\\"ms2gallery_prop_includeOriginal\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:21:\\"ms2gallery:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/snippets\\/snippet.ms2gallery_resources.php","content":"\\/** @var array $scriptProperties *\\/\\n$class = \'modResource\';\\n\\n\\/\\/ Load model\\nif (empty($loadModels)) {\\n\\t$scriptProperties[\'loadModels\'] = \'ms2Gallery\';\\n} else {\\n\\t$loadModels = array_map(\'trim\', explode(\',\', $loadModels));\\n\\tif (!in_array(\'ms2gallery\', $loadModels)) {\\n\\t\\t$loadModels[] = \'ms2gallery\';\\n\\t}\\n\\t$scriptProperties[\'loadModels\'] = $loadModels;\\n}\\n\\n\\/\\/ Type of join\\nif (empty($typeOfJoin)) {\\n\\t$typeOfJoin = \'left\';\\n}\\nswitch (strtolower(trim($typeOfJoin))) {\\n\\tcase \'right\':\\n\\t\\t$join = \'rightJoin\';\\n\\t\\tbreak;\\n\\tcase \'inner\':\\n\\t\\t$join = \'innerJoin\';\\n\\t\\tbreak;\\n\\tdefault:\\n\\t\\t$join = \'leftJoin\';\\n\\t\\tbreak;\\n}\\n\\n\\/\\/ Select modResource\\n$columns = array_keys($modx->getFieldMeta($class));\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\n\\t$key = array_search(\'content\', $columns);\\n\\tunset($columns[$key]);\\n}\\n$select = array(\\n\\t$class => implode(\',\', $columns)\\n);\\n\\n\\/\\/ Include Thumbnails\\n${$join} = array();\\nif (empty($includeThumbs)) {\\n\\t$includeThumbs = \'120x90\';\\n}\\n$thumbs = array_map(\'trim\', explode(\',\', $includeThumbs));\\nif (!empty($thumbs[0])) {\\n\\tforeach ($thumbs as $thumb) {\\n\\t\\t${$join}[] = array(\\n\\t\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\\t\'alias\' => $thumb,\\n\\t\\t\\t\'on\' => preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t\\t`$thumb`.`resource_id` = `$class`.`id` AND\\n\\t\\t\\t\\t`$thumb`.`parent` != 0 AND\\n\\t\\t\\t\\t`$thumb`.`path` LIKE \'%\\/$thumb\\/\' AND\\n\\t\\t\\t\\t`$thumb`.`active` = 1 AND\\n\\t\\t\\t\\t`$thumb`.`rank` = 0\\n\\t\\t\\t\\")\\n\\t\\t);\\n\\t\\t$select[$thumb] = preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t`$thumb`.`url` as `$thumb`,\\n\\t\\t\\t`$thumb`.`name` as `$thumb.name`,\\n\\t\\t\\t`$thumb`.`description` as `$thumb.description`,\\n\\t\\t\\t`$thumb`.`createdon` as `$thumb.createdon`,\\n\\t\\t\\t`$thumb`.`createdby` as `$thumb.createdby`,\\n\\t\\t\\t`$thumb`.`properties` as `$thumb.properties`,\\n\\t\\t\\t`$thumb`.`alt` as `$thumb.alt`,\\n\\t\\t\\t`$thumb`.`add` as `$thumb.add`\\n\\t\\t\\");\\n\\n\\t\\tif (!empty($includeOriginal)) {\\n\\t\\t\\t${$join}[] = array(\\n\\t\\t\\t\\t\'class\' => \'msResourceFile\',\\n\\t\\t\\t\\t\'alias\' => $thumb.\'o\',\\n\\t\\t\\t\\t\'on\' => preg_replace(\'\\/(\\\\n|\\\\t)\\/\', \'\', \\"\\n\\t\\t\\t\\t\\t`{$thumb}o`.`resource_id` = `$class`.`id` AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`parent` = 0 AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`active` = 1 AND\\n\\t\\t\\t\\t\\t`{$thumb}o`.`rank` = 0\\n\\t\\t\\t\\t\\")\\n\\t\\t\\t);\\n\\t\\t\\t$select[$thumb] .= \\", `{$thumb}o`.`url` as `$thumb.original`\\";\\n\\t\\t}\\n\\t}\\n}\\n\\nforeach (array(\'leftJoin\', \'innerJoin\', \'rightJoin\', \'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$scriptProperties[\'select\'] = $modx->toJSON($select);\\n$scriptProperties[\'groupby\'] = $class . \'.id\';\\n$scriptProperties[$join] = $modx->toJSON(${$join});\\n\\nreturn $modx->runSnippet(\'pdoResources\', $scriptProperties);"}',
        'guid' => '7e8a09ab05318927131293490f4b9840',
        'native_key' => 0,
        'signature' => '6985e2eb780fe3e580a901dd547d5913',
      ),
    ),
    'Plugins' => 
    array (
      '82a3c1794605bd505332e9dffbc340a7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ms2Gallery","description":"Main plugin for ms2Gallery","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var array $scriptProperties *\\/\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormRender\':\\n\\t\\t\\/** @var modResource $resource *\\/\\n\\t\\tif ($mode == \'new\' || ($resource->class_key == \'msProduct\' && $modx->getOption(\'ms2gallery_disable_for_ms2\', null, true))) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$template = $resource->get(\'template\');\\n\\t\\t$templates = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_disable_for_templates\')));\\n\\t\\tif ($templates[0] != \'\' && in_array($template, $templates)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t\\/** @var ms2Gallery $ms2Gallery *\\/\\n\\t\\tif ($ms2Gallery = $modx->getService(\'ms2gallery\', \'ms2Gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/ms2gallery\\/\')) {\\n\\t\\t\\t$ms2Gallery->loadManagerFiles($modx->controller, $resource);\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnBeforeDocFormSave\':\\n\\t\\tif ($source_id = $resource->get(\'media_source\')) {\\n\\t\\t\\t$resource->setProperties(array(\'media_source\' => $source_id), \'ms2gallery\');\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnLoadWebDocument\':\\n\\t\\t$tstart = microtime(true);\\n\\t\\t\\/** @var pdoFetch $pdoFetch *\\/\\n\\t\\tif (!$modx->getOption(\'ms2gallery_set_placeholders\', null, false, true) || !$pdoFetch = $modx->getService(\'pdoFetch\')) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$plTemplates = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_placeholders_for_templates\')));\\n\\t\\tif (!empty($plTemplates[0]) && !in_array($modx->resource->get(\'template\'), $plTemplates)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$plPrefix = $modx->getOption(\'ms2gallery_placeholders_prefix\', null, \'ms2g.\', true);\\n\\t\\t$plThumbs = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_placeholders_thumbs\')));\\n\\t\\t$tplName = $modx->getOption(\'ms2gallery_placeholders_tpl\');\\n\\n\\t\\t\\/\\/ Check for assigned TV\\n\\t\\t$q = $modx->newQuery(\'modTemplateVarTemplate\');\\n\\t\\t$q->innerJoin(\'modTemplateVar\', \'TemplateVar\');\\n\\t\\t$q->innerJoin(\'modTemplate\', \'Template\');\\n\\t\\t$q->where(array(\\n\\t\\t\\t\'TemplateVar.name\' => $tplName,\\n\\t\\t\\t\'Template.id\' => $modx->resource->get(\'template\')\\n\\t\\t));\\n\\t\\t$q->select(\'TemplateVar.id\');\\n\\n\\t\\t$tpl = \'\';\\n\\t\\tif ($modx->getCount(\'modTemplateVarTemplate\', $q)) {\\n\\t\\t\\t$tpl = $modx->resource->getTVValue($tplName);\\n\\t\\t}\\n\\t\\t\\/** @var modChunk $chunk *\\/\\n\\t\\tif (empty($tpl) && $chunk = $modx->getObject(\'modChunk\', array(\'name\' => $tplName))) {\\n\\t\\t\\t$tpl = $chunk->getContent();\\n\\t\\t}\\n\\n\\t\\t$options = array(\'loadModels\' => \'ms2gallery\');\\n\\t\\t$where = array(\'resource_id\' => $modx->resource->id, \'parent\' => 0);\\n\\n\\t\\t$parents = $pdoFetch->getCollection(\'msResourceFile\', $where, $options);\\n\\t\\t$options[\'select\'] = \'url\';\\n\\t\\tforeach ($parents as &$parent) {\\n\\t\\t\\t$where = array(\'parent\' => $parent[\'id\']);\\n\\t\\t\\tif (!empty($plThumbs[0])) {\\n\\t\\t\\t\\t$where[\'path:IN\'] = array();\\n\\t\\t\\t\\tforeach ($plThumbs as $thumb) {\\n\\t\\t\\t\\t\\t$where[\'path:IN\'][] = $parent[\'path\'] . $thumb . \'\\/\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tif ($children = $pdoFetch->getCollection(\'msResourceFile\', $where, $options)) {\\n\\t\\t\\t\\tforeach ($children as $child) {\\n\\t\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $child[\'url\'], $size)) {\\n\\t\\t\\t\\t\\t\\t$parent[$size[0]] = $child[\'url\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t$pls = $pdoFetch->makePlaceholders($parent, $plPrefix . $parent[\'rank\'] . \'.\', \'[[+\', \']]\', false);\\n\\t\\t\\t$pls[\'vl\'][$plPrefix . $parent[\'rank\']] = !empty($tpl)\\n\\t\\t\\t\\t? $pdoFetch->getChunk(\'@INLINE \' . $tpl, $parent)\\n\\t\\t\\t\\t: htmlentities(print_r($parent, 1), ENT_QUOTES, \'UTF-8\');\\n\\t\\t\\t$modx->setPlaceholders($pls[\'vl\']);\\n\\t\\t}\\n\\n\\t\\t$modx->log(modX::LOG_LEVEL_INFO, \'[ms2Gallery] Set image placeholders for page id = \' . $modx->resource->id . \' in \' . number_format(microtime(true) - $tstart, 7) . \' sec.\');\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnBeforeEmptyTrash\':\\n\\t\\tif (empty($scriptProperties[\'ids\']) || !is_array($scriptProperties[\'ids\'])) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!$modx->addPackage(\'ms2gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/\')) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$resources = $modx->getIterator(\'modResource\', array(\'id:IN\' => $scriptProperties[\'ids\']));\\n\\t\\t\\/** @var modResource $resource *\\/\\n\\t\\tforeach ($resources as $resource) {\\n\\t\\t\\t$properties = $resource->getProperties(\'ms2gallery\');\\n\\t\\t\\tif (!empty($properties[\'media_source\'])) {\\n\\t\\t\\t\\t\\/** @var modMediaSource $source *\\/\\n\\t\\t\\t\\t$source = $modx->getObject(\'modMediaSource\', $properties[\'media_source\']);\\n\\t\\t\\t\\t$resource_id = $resource->get(\'id\');\\n\\t\\t\\t\\tif ($source) {\\n\\t\\t\\t\\t\\t$source->set(\'ctx\', $resource->get(\'context_key\'));\\n\\t\\t\\t\\t\\t$source->initialize();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$images = $modx->getIterator(\'msResourceFile\', array(\'resource_id\' => $resource_id, \'parent\' => 0));\\n\\t\\t\\t\\t\\/** @var msResourceFile $image *\\/\\n\\t\\t\\t\\tforeach ($images as $image) {\\n\\t\\t\\t\\t\\t$prepare = $image->prepareSource($source);\\n\\t\\t\\t\\t\\tif ($prepare === true) {\\n\\t\\t\\t\\t\\t\\t$image->remove();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \\"[ms2Gallery] {$prepare}.\\");\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif ($source) {\\n\\t\\t\\t\\t\\t$source->removeContainer($source->getBasePath() . $resource_id);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/ms2gallery\\/elements\\/plugins\\/plugin.ms2gallery.php","content":"\\/** @var array $scriptProperties *\\/\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormRender\':\\n\\t\\t\\/** @var modResource $resource *\\/\\n\\t\\tif ($mode == \'new\' || ($resource->class_key == \'msProduct\' && $modx->getOption(\'ms2gallery_disable_for_ms2\', null, true))) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$template = $resource->get(\'template\');\\n\\t\\t$templates = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_disable_for_templates\')));\\n\\t\\tif ($templates[0] != \'\' && in_array($template, $templates)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t\\/** @var ms2Gallery $ms2Gallery *\\/\\n\\t\\tif ($ms2Gallery = $modx->getService(\'ms2gallery\', \'ms2Gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/ms2gallery\\/\')) {\\n\\t\\t\\t$ms2Gallery->loadManagerFiles($modx->controller, $resource);\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnBeforeDocFormSave\':\\n\\t\\tif ($source_id = $resource->get(\'media_source\')) {\\n\\t\\t\\t$resource->setProperties(array(\'media_source\' => $source_id), \'ms2gallery\');\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnLoadWebDocument\':\\n\\t\\t$tstart = microtime(true);\\n\\t\\t\\/** @var pdoFetch $pdoFetch *\\/\\n\\t\\tif (!$modx->getOption(\'ms2gallery_set_placeholders\', null, false, true) || !$pdoFetch = $modx->getService(\'pdoFetch\')) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$plTemplates = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_placeholders_for_templates\')));\\n\\t\\tif (!empty($plTemplates[0]) && !in_array($modx->resource->get(\'template\'), $plTemplates)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$plPrefix = $modx->getOption(\'ms2gallery_placeholders_prefix\', null, \'ms2g.\', true);\\n\\t\\t$plThumbs = array_map(\'trim\', explode(\',\', $modx->getOption(\'ms2gallery_placeholders_thumbs\')));\\n\\t\\t$tplName = $modx->getOption(\'ms2gallery_placeholders_tpl\');\\n\\n\\t\\t\\/\\/ Check for assigned TV\\n\\t\\t$q = $modx->newQuery(\'modTemplateVarTemplate\');\\n\\t\\t$q->innerJoin(\'modTemplateVar\', \'TemplateVar\');\\n\\t\\t$q->innerJoin(\'modTemplate\', \'Template\');\\n\\t\\t$q->where(array(\\n\\t\\t\\t\'TemplateVar.name\' => $tplName,\\n\\t\\t\\t\'Template.id\' => $modx->resource->get(\'template\')\\n\\t\\t));\\n\\t\\t$q->select(\'TemplateVar.id\');\\n\\n\\t\\t$tpl = \'\';\\n\\t\\tif ($modx->getCount(\'modTemplateVarTemplate\', $q)) {\\n\\t\\t\\t$tpl = $modx->resource->getTVValue($tplName);\\n\\t\\t}\\n\\t\\t\\/** @var modChunk $chunk *\\/\\n\\t\\tif (empty($tpl) && $chunk = $modx->getObject(\'modChunk\', array(\'name\' => $tplName))) {\\n\\t\\t\\t$tpl = $chunk->getContent();\\n\\t\\t}\\n\\n\\t\\t$options = array(\'loadModels\' => \'ms2gallery\');\\n\\t\\t$where = array(\'resource_id\' => $modx->resource->id, \'parent\' => 0);\\n\\n\\t\\t$parents = $pdoFetch->getCollection(\'msResourceFile\', $where, $options);\\n\\t\\t$options[\'select\'] = \'url\';\\n\\t\\tforeach ($parents as &$parent) {\\n\\t\\t\\t$where = array(\'parent\' => $parent[\'id\']);\\n\\t\\t\\tif (!empty($plThumbs[0])) {\\n\\t\\t\\t\\t$where[\'path:IN\'] = array();\\n\\t\\t\\t\\tforeach ($plThumbs as $thumb) {\\n\\t\\t\\t\\t\\t$where[\'path:IN\'][] = $parent[\'path\'] . $thumb . \'\\/\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tif ($children = $pdoFetch->getCollection(\'msResourceFile\', $where, $options)) {\\n\\t\\t\\t\\tforeach ($children as $child) {\\n\\t\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $child[\'url\'], $size)) {\\n\\t\\t\\t\\t\\t\\t$parent[$size[0]] = $child[\'url\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t$pls = $pdoFetch->makePlaceholders($parent, $plPrefix . $parent[\'rank\'] . \'.\', \'[[+\', \']]\', false);\\n\\t\\t\\t$pls[\'vl\'][$plPrefix . $parent[\'rank\']] = !empty($tpl)\\n\\t\\t\\t\\t? $pdoFetch->getChunk(\'@INLINE \' . $tpl, $parent)\\n\\t\\t\\t\\t: htmlentities(print_r($parent, 1), ENT_QUOTES, \'UTF-8\');\\n\\t\\t\\t$modx->setPlaceholders($pls[\'vl\']);\\n\\t\\t}\\n\\n\\t\\t$modx->log(modX::LOG_LEVEL_INFO, \'[ms2Gallery] Set image placeholders for page id = \' . $modx->resource->id . \' in \' . number_format(microtime(true) - $tstart, 7) . \' sec.\');\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnBeforeEmptyTrash\':\\n\\t\\tif (empty($scriptProperties[\'ids\']) || !is_array($scriptProperties[\'ids\'])) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!$modx->addPackage(\'ms2gallery\', MODX_CORE_PATH . \'components\\/ms2gallery\\/model\\/\')) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\t$resources = $modx->getIterator(\'modResource\', array(\'id:IN\' => $scriptProperties[\'ids\']));\\n\\t\\t\\/** @var modResource $resource *\\/\\n\\t\\tforeach ($resources as $resource) {\\n\\t\\t\\t$properties = $resource->getProperties(\'ms2gallery\');\\n\\t\\t\\tif (!empty($properties[\'media_source\'])) {\\n\\t\\t\\t\\t\\/** @var modMediaSource $source *\\/\\n\\t\\t\\t\\t$source = $modx->getObject(\'modMediaSource\', $properties[\'media_source\']);\\n\\t\\t\\t\\t$resource_id = $resource->get(\'id\');\\n\\t\\t\\t\\tif ($source) {\\n\\t\\t\\t\\t\\t$source->set(\'ctx\', $resource->get(\'context_key\'));\\n\\t\\t\\t\\t\\t$source->initialize();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$images = $modx->getIterator(\'msResourceFile\', array(\'resource_id\' => $resource_id, \'parent\' => 0));\\n\\t\\t\\t\\t\\/** @var msResourceFile $image *\\/\\n\\t\\t\\t\\tforeach ($images as $image) {\\n\\t\\t\\t\\t\\t$prepare = $image->prepareSource($source);\\n\\t\\t\\t\\t\\tif ($prepare === true) {\\n\\t\\t\\t\\t\\t\\t$image->remove();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \\"[ms2Gallery] {$prepare}.\\");\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif ($source) {\\n\\t\\t\\t\\t\\t$source->removeContainer($source->getBasePath() . $resource_id);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n}"}',
        'guid' => '1224598cf04d5ec73830215b8300c9aa',
        'native_key' => 0,
        'signature' => '4e63f97809d6117832edb7a659f0c8f9',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            'dd6102ab9239590d7e86884ebacf2f5d' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormRender","priority":0,"propertyset":0}',
              'guid' => 'c0ab1f74bdcbd403a43d389bb7e7b6d4',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormRender',
              ),
              'signature' => '8f277a6b3a5ee4023e2eb2bcd58375f3',
            ),
            '6d15f0461cabafe143dae15606bbf4fa' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => '053fc1f51753fe3286ad4031812cbddc',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => 'c4f00aab47b7bdcccf216c1be60da40c',
            ),
            'ec1437956d0371c3cf7440b30e22dc4f' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnBeforeDocFormSave","priority":0,"propertyset":0}',
              'guid' => 'b27c79667a9e2b179908b7d35e9c4cd3',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnBeforeDocFormSave',
              ),
              'signature' => '5d8a57a41eaadbf02f2ddeccc56324b6',
            ),
            '3993b8b92cd698020c83695280d71be0' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnBeforeEmptyTrash","priority":0,"propertyset":0}',
              'guid' => '7bfbb0a7aa691a4ddce0681c6bc7132f',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnBeforeEmptyTrash',
              ),
              'signature' => '0b466979a0b88244172e66a37a3bffac',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'ms2gallery',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"ms2gallery"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"ms2gallery"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.update.resolver","type":"php","name":"resolve.update"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.tv.resolver","type":"php","name":"resolve.tv"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"ms2gallery-1.4.8-pl1\\/modCategory\\/5da91a9b0b0336ac0bc1b7bba8da8811.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '58aef19d43fa2cd0073b925bb68bf14f',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '5da91a9b0b0336ac0bc1b7bba8da8811',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"ms2Gallery"}',
);